<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.38">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Guided Discovery: Fractal Trees With Turtle</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<link href="../../../assets/img/icons/favicon.png" rel="icon" type="image/png">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="../../../styles.css">
</head>

<body class="nav-sidebar docked slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">Guided Discovery: Fractal Trees With Turtle</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../../../"><b>Introduction to Computing</b><br>CSCI 0145</a> 
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../index.html" class="sidebar-item-text sidebar-link">Welcome!</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../syllabus.html" class="sidebar-item-text sidebar-link">Syllabus</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../collaboration.html" class="sidebar-item-text sidebar-link">Collaboration And Academic Honesty</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../tools.html" class="sidebar-item-text sidebar-link">Course Resources</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../help.html" class="sidebar-item-text sidebar-link">Asking for Help</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../schedule.html" class="sidebar-item-text sidebar-link">Course Schedule</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../philosophy.html" class="sidebar-item-text sidebar-link">Some Teaching Philosophies</a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../acknowledgements.html" class="sidebar-item-text sidebar-link">Acknowledgements</a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">0. Introduction</a></li>
  <li><a href="#draw-a-vertical-line" id="toc-draw-a-vertical-line" class="nav-link" data-scroll-target="#draw-a-vertical-line">1. Draw a Vertical Line</a></li>
  <li><a href="#pause-to-look-around" id="toc-pause-to-look-around" class="nav-link" data-scroll-target="#pause-to-look-around">2. Pause to Look Around</a></li>
  <li><a href="#establish-the-base-case" id="toc-establish-the-base-case" class="nav-link" data-scroll-target="#establish-the-base-case">3. Establish the Base Case</a></li>
  <li><a href="#implement-the-recursive-step" id="toc-implement-the-recursive-step" class="nav-link" data-scroll-target="#implement-the-recursive-step">4. Implement the Recursive Step</a></li>
  <li><a href="#make-some-pretty-pictures" id="toc-make-some-pretty-pictures" class="nav-link" data-scroll-target="#make-some-pretty-pictures">5. Make Some Pretty Pictures!</a></li>
  <li><a href="#if-you-have-time" id="toc-if-you-have-time" class="nav-link" data-scroll-target="#if-you-have-time">6. If You Have Time</a>
  <ul class="collapse">
  <li><a href="#leaves" id="toc-leaves" class="nav-link" data-scroll-target="#leaves">Leaves</a></li>
  <li><a href="#ternary-trees" id="toc-ternary-trees" class="nav-link" data-scroll-target="#ternary-trees">Ternary Trees</a></li>
  <li><a href="#challenge-n-ary-trees" id="toc-challenge-n-ary-trees" class="nav-link" data-scroll-target="#challenge-n-ary-trees">Challenge: <code>n</code>-ary trees</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block">Guided Discovery: Fractal Trees With Turtle</h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<section id="introduction" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="introduction">0. Introduction</h2>
<div class="page-columns page-full"><p></p><div class="no-row-height column-margin column-container"><span class="aside"><img src="https://blog.ploeh.dk/content/binary/symmetric-fractal-tree.png" class="img-fluid"> An example of a fractal tree, very similar to the one we will make today with Turtle. <br> <a href="https://blog.ploeh.dk/2017/06/06/fractal-trees-with-purescript/"><em>Image source</em></a></span></div></div>
<p>In this assignment, you’ll use the Turtle graphics system that we introduced in class, along with your powerful new recursion techniques, to create <strong>fractal trees</strong>. A fractal tree is a graphic in which a single line divides into two or more lines at an angle, repeatedly. The result is an elegant tree-like structure.</p>
<p><a href="https://replit.com/team/csci-0145/Guided-Discovery-3-Recursion-and-Turtle-Graphics">Assignment file on Replit</a>.</p>
</section>
<section id="draw-a-vertical-line" class="level2">
<h2 class="anchored" data-anchor-id="draw-a-vertical-line">1. Draw a Vertical Line</h2>
<p>Like last time, we’re going to practice <em>incremental development</em>. We’ll start with a very simple function. Then, at each stage, we’ll add just a bit of complexity until we achieve the behavior that we are looking for.</p>
<p>Here’s the first step:</p>
<ol type="1">
<li>Define a function called <code>draw_tree()</code> that accepts a single argument called <code>length</code>.</li>
<li>This function should cause the turtle to move forward by <code>length</code>, and then backwards by the same <code>length</code>. So, the turtle ends where it started.</li>
</ol>
<p>Call your function like this:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>draw_tree(<span class="dv">100</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>At this stage, the expected result is that your turtle moves up and then down, tracing a single vertical line.</p>
<p><strong>Hint</strong>: Remember that you can move the turtle forward with the command <code>turtle.forward(length)</code>.</p>
</section>
<section id="pause-to-look-around" class="level2">
<h2 class="anchored" data-anchor-id="pause-to-look-around">2. Pause to Look Around</h2>
<p>Next, make your turtle <em>look around</em> after the forward step and before the backward step.</p>
<ol type="1">
<li>Add an argument to <code>draw_tree()</code> called <code>angle</code>.</li>
<li>After the forward step, make the turtle turn <code>angle</code> degrees to the right.</li>
<li>Then, make the turtle turn <code>2*angle</code> degrees to the left.</li>
<li>Make the turtle turn <code>angle</code> degrees to the right again.</li>
<li>Then finish with the backward step.</li>
</ol>
<p>Call your function like this:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>draw_tree(<span class="dv">100</span>, angle <span class="op">=</span> <span class="dv">90</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The end result is <em>still</em> a simple vertical line. When you run the file, you should still see your turtle move straight up and down. After it moves up, though, you should see it “look around” to both the right and the left before returning to the starting point.</p>
<p><strong>Hint</strong>: Remember that you can make the turtle turn left with <code>turtle.left(angle)</code>.</p>
</section>
<section id="establish-the-base-case" class="level2">
<h2 class="anchored" data-anchor-id="establish-the-base-case">3. Establish the Base Case</h2>
<p>We are going to use recursion to draw the tree. Modify your function in the following ways:</p>
<ol type="1">
<li>Add an argument to your function called <code>level</code>.</li>
<li>Add an <code>if</code>-statement to your function. Check if <code>level == 0</code>. If so, do nothing! You can do nothing by simply writing <code>pass</code> inside the body of the <code>if</code>-statement. This is our base case.</li>
<li>In the <code>else</code> clause, place the code you’ve written previously.</li>
</ol>
<p>Call your function twice:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>draw_tree(<span class="dv">100</span>, angle <span class="op">=</span> <span class="dv">90</span>, level <span class="op">=</span> <span class="dv">0</span>) <span class="co"># should do nothing</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>draw_tree(<span class="dv">100</span>, angle <span class="op">=</span> <span class="dv">90</span>, level <span class="op">=</span> <span class="dv">1</span>) <span class="co"># should do same thing as in Part 2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="implement-the-recursive-step" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="implement-the-recursive-step">4. Implement the Recursive Step</h2>
<p>This is where the magic happens! Add two recursive function calls, one immediately after the turtle turns right and another immediately after the turtle turns left.</p>
<p>Each call should decrease the <code>length</code> and the <code>level</code>.</p>
<ul>
<li>Decrease <code>length</code> by a multiple. For example, the new <code>length</code> is 75% of the old <code>length</code>.</li>
<li>Decrease <code>level</code> by 1. For example, if the previous <code>level</code> was 5, the new <code>level</code> is 4.</li>
</ul>
<p>The purpose of decreasing the <code>level</code> is to ensure that your function will eventually stop.</p>
<p>Here’s a sample function call and result:</p>
<div class="page-columns page-full"><p></p><div class="no-row-height column-margin column-container"><span class="aside"><img src="../../../assets/img/turtle-example-1.png" class="img-fluid"> Example output for a tree with 3 levels.</span></div></div>
<div class="sourceCode" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>draw_tree(<span class="dv">100</span>, angle <span class="op">=</span> <span class="dv">45</span>, level <span class="op">=</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Your result might be a little different, depending on exactly how you chose to reduce the length in each step. In any case, however, you should see a “tree” with two large branches and four smaller branches.</p>
<p>Here’s another one. The first command makes the turtle move more quickly, which is helpful when the figure gets more complex.</p>
<div class="page-columns page-full"><p></p><div class="no-row-height column-margin column-container"><span class="aside"><img src="../../../assets/img/turtle-example-2.png" class="img-fluid"> Example output for a tree with 7 levels</span></div></div>
<div class="sourceCode" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>turtle.speed(<span class="fl">.1</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>draw_tree(<span class="dv">100</span>, angle <span class="op">=</span> <span class="dv">15</span>, level <span class="op">=</span> <span class="dv">7</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="make-some-pretty-pictures" class="level2">
<h2 class="anchored" data-anchor-id="make-some-pretty-pictures">5. Make Some Pretty Pictures!</h2>
<p>Play a little with all three arguments of the <code>draw_tree()</code> function in order to produce some attractive trees.</p>
</section>
<section id="if-you-have-time" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="if-you-have-time">6. If You Have Time</h2>
<p>If you were able to draw several trees, then great job! You’ve done enough to earn full participation credit in this Guided Discovery activity. You’re ready to submit your assignment under Guided Discovery 3 on Gradescope.</p>
<p>If you’ve gotten that far and want to do more, I have some challenges for you!</p>
<section id="leaves" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="leaves">Leaves</h3>
<div class="page-columns page-full"><p></p><div class="no-row-height column-margin column-container"><span class="aside"><img src="../../../assets/img/turtle-example-3.png" class="img-fluid"> Example output for the “Leaves” challenge problem.</span></div></div>
<p>The commands <code>turtle.color("green")</code> and <code>turtle.color("brown")</code> will change the color of the line drawn by the turtle. The command <code>turtle.circle(4)</code> will draw a circle. Using these new commands, add color and leaves to your tree.</p>
<p>If your implementation results in each branch having two green circular leaves (like mine does above), explain this: why are there two circles on each branch?</p>
</section>
<section id="ternary-trees" class="level3">
<h3 class="anchored" data-anchor-id="ternary-trees">Ternary Trees</h3>
<p>The fractal trees we just made are <em>binary trees</em>. This means that each branch splits into two more branches. Modify your code so that each branch instead splits into <em>three</em> more branches.</p>
<p><strong>Hint</strong>: You can do this by adding a single recursive function call.</p>
</section>
<section id="challenge-n-ary-trees" class="level3">
<h3 class="anchored" data-anchor-id="challenge-n-ary-trees">Challenge: <code>n</code>-ary trees</h3>
<p>Add an argument to your function that allows the user to specify <code>n</code>, the number of new branches into which each branch splits. The main activity corresponded to the case <code>n = 2</code>, and the option directly above corresponded to <code>n = 3</code>. For this challenge activity, your code should accept any integer <code>n</code> larger than 0.</p>


</section>
</section>

<p><br> <br> <span style="color:grey;">© Philip Claude Caplan, Andrea Vaccari, and Phil Chodrow, 2022</span></p></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>